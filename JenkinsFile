pipeline {
  agent any

  options {
    ansiColor('xterm')
  }


   stages {
       stage('Dependencies') {
           steps {
       
               sh 'npx cypress install --force'
               sh 'npm run report:delete'
           }
       }
        stage('e2e Tests') {
           steps {
               sh 'npx cypress run --config video=false,screenshotOnRunFailure=false --reporter junit --reporter-options "mochaFile=reports/TEST-[hash].xml"'


           
  
 }     
  }
        stage('Send Report TestRail') {
           steps {
              sh ' junitparser merge --glob "reports/TEST-*" "reports/junit-report.xml"' 


           }
}
}
}
